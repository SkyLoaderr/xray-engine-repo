;-------------------------------------------------------------------------------------------------
;-- ESCAPE BLOCKPOST
;-------------------------------------------------------------------------------------------------
[logic@esc_blockpost_patrol1]
active = patrol@esc_blokpost_day_patrol_commander

[patrol@esc_blokpost_day_patrol_commander]
path_walk = day_patrol_walk
path_look = day_patrol_look
formation = back
commander = true


[logic@esc_blockpost_follower1]
active = patrol@esc_blokpost_day_patrol_follower1

[patrol@esc_blokpost_day_patrol_follower1]
path_walk = day_patrol_walk
path_look = day_patrol_look
formation = back
commander = false


[logic@esc_blockpost_follower2]
active = patrol@esc_blokpost_day_patrol_follower2

[patrol@esc_blokpost_day_patrol_follower2]
path_walk = day_patrol_walk
path_look = day_patrol_look
formation = back
commander = false


[logic@esc_blockpost_commander_day]
active = camper@esc_blockpost_commander_day

[camper@esc_blockpost_commander_day]
path_walk = commander_walk
path_look = commander_look


[logic@esc_blockpost_post1]
active = walker@esc_blockpost_post1

[walker@esc_blockpost_post1]
path_walk = post_walk1
path_look = post_look1


[logic@esc_blockpost_post2]
active = walker@esc_blockpost_post2

[walker@esc_blockpost_post2]
path_walk = post_walk2
path_look = post_look2


[logic@esc_blockpost_camper_day]
active = camper@esc_blockpost_camper_day

[camper@esc_blockpost_camper_day]
path_walk = camper_day_walk
path_look = camper_day_look
sniper = true
def_state_campering = threat


[logic@esc_blockpost_patrol_yard]
active = walker@esc_blockpost_patrol_yard

[walker@esc_blockpost_patrol_yard]
path_walk = patrol_yard_walk


[logic@esc_blockpost_watch_tv1]
active = walker@esc_blockpost_watch_tv1

[walker@esc_blockpost_watch_tv1]
path_walk = watch_walk1
path_look = watch_look1


[logic@esc_blockpost_watch_tv2]
active = walker@esc_blockpost_watch_tv2

[walker@esc_blockpost_watch_tv2]
path_walk = watch_walk2
path_look = watch_look2


[logic@esc_blockpost_kamp1]
active = kamp@esc_blockpost_kamp1

[kamp@esc_blockpost_kamp1]
center_point = kamp
path_walk = kamp_task
soundgroup = esc_blokpost_soldier


[logic@esc_blockpost_sleep1]
active = sleeper@esc_blockpost_sleep1

[sleeper@esc_blockpost_sleep1]
path_main = sleep1
wakeable = false


[logic@esc_blockpost_sleep2]
active = sleeper@esc_blockpost_sleep2

[sleeper@esc_blockpost_sleep2]
path_main = sleep2
wakeable = false


[logic@esc_blockpost_sleep3]
active = sleeper@esc_blockpost_sleep3

[sleeper@esc_blockpost_sleep3]
path_main = sleep3
wakeable = false


[logic@esc_blockpost_sleep4]
active = sleeper@esc_blockpost_sleep4

[sleeper@esc_blockpost_sleep4]
path_main = sleep4
wakeable = false


[logic@esc_blockpost_comander_guard1]
active = walker@esc_blockpost_comander_guard1

[walker@esc_blockpost_comander_guard1]
path_walk = guard_walk1
path_look = guard_look1


[logic@esc_blockpost_comander_guard2]
active = walker@esc_blockpost_comander_guard2

[walker@esc_blockpost_comander_guard2]
path_walk = guard_walk2
path_look = guard_look2


[logic@esc_blockpost_camper1]
active = camper@esc_blockpost_camper1

[camper@esc_blockpost_camper1]
path_walk = camper1_walk
path_look = camper1_look
sniper = true


[logic@esc_blockpost_camper2]
active = camper@esc_blockpost_camper2

[camper@esc_blockpost_camper2]
path_walk = camper2_walk
path_look = camper2_look
sniper = true


[logic@esc_blockpost_alarm_patrol1]
active = walker@esc_blockpost_alarm_patrol1

[walker@esc_blockpost_alarm_patrol1]
path_walk = alarm1_walk


[logic@esc_blockpost_alarm_patrol2]
active = walker@esc_blockpost_alarm_patrol2

[walker@esc_blockpost_alarm_patrol2]
path_walk = alarm2_walk


;-----------------------------------------------------------------------------
;------------------------------  ESCAPE SPECNAZ  -----------------------------
;-----------------------------------------------------------------------------
[logic@esc_specnaz_kamp]
active = kamp@esc_specnaz_kamp

[kamp@esc_specnaz_kamp]
center_point = kamp
soundgroup = esc_blokpost_specnaz


[logic@esc_specnaz_raid1]
active = patrol@esc_specnaz_raid1

[patrol@esc_specnaz_raid1]
path_walk = walk_raid1
formation = line
commander = true
move_type = raid


[logic@esc_specnaz_raid2]
active = patrol@esc_specnaz_raid2

[patrol@esc_specnaz_raid2]
path_walk = walk_raid2
formation = line
commander = true
move_type = raid


[logic@esc_specnaz_follower1]
active = patrol@esc_specnaz_follower1

[patrol@esc_specnaz_follower1]
path_walk = walk_raid1
formation = line
move_type = raid


[logic@esc_specnaz_follower2]
active = patrol@esc_specnaz_follower2

[patrol@esc_specnaz_follower2]
path_walk = walk_raid1
formation = line
move_type = raid


[logic@esc_specnaz_follower3]
active = patrol@esc_specnaz_follower3

[patrol@esc_specnaz_follower3]
path_walk = walk_raid2
formation = line
move_type = raid


[logic@esc_specnaz_follower4]
active = patrol@esc_specnaz_follower4

[patrol@esc_specnaz_follower4]
path_walk = walk_raid2
formation = line
move_type = raid

;-------------------------------------------------------------------------------------------------
;-- ESCAPE LAGER
;-------------------------------------------------------------------------------------------------
; Волк
[logic@esc_lager_volk]
active = walker@esc_lager_volk_walker1
on_death = death@wolf

[walker@esc_lager_volk_walker1]
path_walk = wolf_walk
path_look = wolf_look
meet = meet@wolf
;on_info = {+esc_return =is_alive(006)} %=kill%
on_info = {+esc_wolf_say} remark@esc_lager_volk_wait2

[remark@esc_lager_volk_wait2]
anim = wait
snd = esc_wolf_say_thanks
on_signal = sound_end| walker@esc_lager_volk_walker3
;on_info = {+esc_return =is_alive(006)} %=kill%

[walker@esc_lager_volk_walker3]
path_walk = wolf_walk
path_look = wolf_look
meet = meet@wolf
;on_info = {+esc_return =is_alive(006)} %=kill%

[meet@wolf]
meet_state		= 15|wait@wait
meet_state_wpn	= 15|backoff@threat_weap
victim		= 15|actor
victim_wpn		= 15|actor
use			= true
use_wpn		= false
syndata		= hello@hail|backoff@threat_weap

[death@wolf]
on_info = %+esc_wolf_dead%

;Fanat
[logic@esc_lager_fanat]
active = walker@esc_lager_fanat

[walker@esc_lager_fanat]
path_walk = wolf_walk
path_look = wolf_look
meet = meet@wolf
on_actor_dist_le = 5 | {-escape_lager_help} remark@esc_fanat_need_help

[remark@esc_fanat_need_help]
anim = hello
snd = esc_fanat_dialog
on_signal = sound_end| remark@esc_lager_fanat_wait
meet = meet@wolf

[remark@esc_lager_fanat_wait]
anim = guard
on_timer = 7000| walker@esc_lager_fanat
meet = meet@wolf



;охранники
[esc_lager_actor_dialogs]
id = escape_lager_access

[logic@esc_lager_zoneguard1]
active = walker@esc_lager_zoneguard1
actor_dialogs = esc_lager_actor_dialogs

[walker@esc_lager_zoneguard1]
path_walk  = guard_walk1
path_look  = guard_look1
meet = meet@zoneguard_novice_lager1

[meet@zoneguard_novice_lager1]
meet_state 		= 30| {+tutorial_wounded_help} wait, {+tutorial_wounded_death} wait, {+tutorial_wounded_die} backoff, threat@ {+tutorial_wounded_help} talk_hello, {+tutorial_wounded_death} talk_hello, {+tutorial_wounded_die} threat_stop, threat_back
meet_state_wpn 	= 30| {+tutorial_wounded_help} wait, {+tutorial_wounded_death} wait, {+tutorial_wounded_die} backoff, threat@ {+tutorial_wounded_help} talk_hello, {+tutorial_wounded_death} talk_hello, {+tutorial_wounded_die} threat_stop, threat_back
victim 			= 30| actor
victim_wpn 		= 30| actor
use			= true
use_wpn		= true
zone			= esc_lager_guard_warn_zone1|{-esc_path_to_lager} threat@ {-esc_path_to_lager} esc_guard_camp| esc_lager_guard_kill_zone| {-esc_path_to_lager} true@ {-esc_path_to_lager} talk_abuse
meet_dialog		= escape_lager_guard_start_dialog



[logic@esc_lager_zoneguard2]
active = walker@esc_lager_zoneguard2
actor_dialogs = esc_lager_actor_dialogs

[walker@esc_lager_zoneguard2]
path_walk  = guard_walk2
path_look  = guard_look2
meet = meet@zoneguard_novice_lager2

[meet@zoneguard_novice_lager2]
meet_state 		= 30| {+tutorial_wounded_help} wait, {+tutorial_wounded_death} wait, {+tutorial_wounded_die} backoff, threat@ {+tutorial_wounded_help} talk_hello, {+tutorial_wounded_death} talk_hello, {+tutorial_wounded_die} threat_stop, threat_back
meet_state_wpn 	= 30| {+tutorial_wounded_help} wait, {+tutorial_wounded_death} wait, {+tutorial_wounded_die} backoff, threat@ {+tutorial_wounded_help} talk_hello, {+tutorial_wounded_death} talk_hello, {+tutorial_wounded_die} threat_stop, threat_back
victim 			= 30| actor
victim_wpn 		= 30| actor
use			= true
use_wpn		= true
zone			= esc_lager_guard_warn_zone2| {-esc_path_to_lager} threat@ {-esc_path_to_lager}esc_guard_camp| esc_lager_guard_kill_zone| {-esc_path_to_lager} true@ {-esc_path_to_lager} talk_abuse
meet_dialog		= escape_lager_guard_start_dialog

[logic@esc_lager_walker1]
active = walker1@esc_lager

[walker1@esc_lager]
path_walk  = guard_walk1
path_look  = guard_look1
meet_enabled = true
meet_dialog = escape_lager_guard_start_dialog


[logic@esc_lager_walker2]
active = walker2@esc_lager

[walker2@esc_lager]
path_walk  = guard_walk2
path_look  = guard_look2
meet_enabled = true
meet_dialog = escape_lager_guard_start_dialog


[logic@esc_lager_walker3]
active = walker3@esc_lager

[walker3@esc_lager]
path_walk  = guard_walk3


[logic@esc_lager_walker4]
active = walker4@esc_lager

[walker4@esc_lager]
path_walk  = guard_walk4


; сидящие днём у костра
[logic@esc_lager_kamp1]
active = kamp1@esc_lager

[kamp1@esc_lager]
center_point  = camp_center
path_walk = camp_center_task
soundgroup = esc_lager


;спящие ночью
[logic@esc_lager_sleeper1]
active = sleeper1@esc_lager

[sleeper1@esc_lager]
path_main = sleep1


[logic@esc_lager_sleeper2]
active = sleeper2@esc_lager

[sleeper2@esc_lager]
path_main = sleep2


[logic@esc_lager_sleeper3]
active = sleeper3@esc_lager

[sleeper3@esc_lager]
path_main = sleep3


;спящие ночью и днём
[logic@esc_lager_sleeper4]
active = sleeper4@esc_lager

[sleeper4@esc_lager]
path_main = sleep4


[logic@esc_lager_sleeper5]
active = sleeper5@esc_lager

[sleeper5@esc_lager]
path_main = sleep5


[logic@esc_lager_sleeper6]
active = sleeper6@esc_lager

[sleeper6@esc_lager]
path_main = sleep6


[logic@esc_lager_sleeper7]
active = sleeper7@esc_lager

[sleeper7@esc_lager]
path_main = sleep7


; защита лагеря
[logic@esc_lager_defend1]
active = walker@esc_lager_defend1
combat_ignore = combat_ignore
on_hit = hit@lager
on_death = death@lager

[walker@esc_lager_defend1]
path_walk = defend1_walk
path_look = defend1_look
combat_ignore_cond = {-esc_open_lager_fire}


[logic@esc_lager_defend2]
active = walker@esc_lager_defend2
combat_ignore = combat_ignore
on_hit = hit@lager
on_death = death@lager

[walker@esc_lager_defend2]
path_walk = defend2_walk
path_look = defend2_look
combat_ignore_cond = {-esc_open_lager_fire}


[logic@esc_lager_defend3]
active = walker@esc_lager_defend3
combat_ignore = combat_ignore
on_hit = hit@lager
on_death = death@lager

[walker@esc_lager_defend3]
path_walk = defend3_walk
path_look = defend3_look
combat_ignore_cond = {-esc_open_lager_fire}


[logic@esc_lager_defend4]
active = walker@esc_lager_defend4
combat_ignore = combat_ignore
on_hit = hit@lager
on_death = death@lager

[walker@esc_lager_defend4]
path_walk = defend4_walk
path_look = defend4_look
combat_ignore_cond = {-esc_open_lager_fire}


[logic@esc_lager_defend5]
active = walker@esc_lager_defend5
combat_ignore = combat_ignore
on_hit = hit@lager
on_death = death@lager

[walker@esc_lager_defend5]
path_walk = defend5_walk
path_look = defend5_look
combat_ignore_cond = {-esc_open_lager_fire}


[logic@esc_lager_defend6]
active = camper@esc_lager_defend6
combat_ignore = combat_ignore
on_hit = hit@lager
on_death = death@lager

[camper@esc_lager_defend6]
path_walk = defend6_walk
path_look = defend6_look
combat_ignore_cond = {-esc_open_lager_fire}
radius = 5
on_info = {=gulag_population_le(esc_lager:6)} walker@esc_lager_defend_new1

[walker@esc_lager_defend_new1]
path_walk = esc_lager_guard_walk4


[logic@esc_lager_defend7]
active = camper@esc_lager_defend7
combat_ignore = combat_ignore
on_hit = hit@lager
on_death = death@lager

[camper@esc_lager_defend7]
path_walk = defend7_walk
path_look = defend7_look
combat_ignore_cond = {-esc_open_lager_fire}
radius = 5
on_info = {=gulag_population_le(esc_lager:6)} walker@esc_lager_defend_new2

[walker@esc_lager_defend_new2]
path_walk = esc_lager_guard_walk4


[logic@esc_lager_defend8]
active = camper@esc_lager_defend8
combat_ignore = combat_ignore
on_hit = hit@lager
on_death = death@lager

[camper@esc_lager_defend8]
path_walk = defend8_walk
path_look = defend8_look
combat_ignore_cond = {-esc_open_lager_fire}
radius = 5
on_info = {=gulag_population_le(esc_lager:6)} walker@esc_lager_defend_new3

[walker@esc_lager_defend_new3]
path_walk = esc_lager_guard_walk4


[logic@esc_lager_defend9]
active = camper@esc_lager_defend9
combat_ignore = combat_ignore
on_hit = hit@lager
on_death = death@lager

[camper@esc_lager_defend9]
path_walk = defend9_walk
path_look = defend9_look
combat_ignore_cond = {-esc_open_lager_fire}
radius = 5
on_info = {=gulag_population_le(esc_lager:6)} walker@esc_lager_defend_new4

[walker@esc_lager_defend_new4]
path_walk = esc_lager_guard_walk4


[logic@esc_lager_defend10]
active = camper@esc_lager_defend10
combat_ignore = combat_ignore
on_hit = hit@lager
on_death = death@lager

[camper@esc_lager_defend10]
path_walk = defend10_walk
path_look = defend10_look
combat_ignore_cond = {-esc_open_lager_fire}
radius = 5
on_info = {=gulag_population_le(esc_lager:6)} walker@esc_lager_defend_new5

[walker@esc_lager_defend_new5]
path_walk = esc_lager_guard_walk4


[logic@esc_lager_defend11]
active = camper@esc_lager_defend11
combat_ignore = combat_ignore
on_hit = hit@lager
on_death = death@lager

[camper@esc_lager_defend11]
path_walk = defend11_walk
path_look = defend11_look
combat_ignore_cond = {-esc_open_lager_fire}
radius = 5
on_info = {=gulag_population_le(esc_lager:6)} walker@esc_lager_defend_new6

[walker@esc_lager_defend_new6]
path_walk = esc_lager_guard_walk4


[logic@esc_lager_defend12]
active = remark@esc_lager_defend12
combat_ignore = combat_ignore
on_hit = hit@lager
on_death = death@fanat

[remark@esc_lager_defend12]
path_walk = wolf_walk
anim = guard
snd = esc_fanat_ready
on_signal = sound_end| walker@esc_lager_defend12

[walker@esc_lager_defend12]
path_walk = defend12_walk
path_look = defend12_look
combat_ignore_cond = {-esc_open_lager_fire}



[combat_ignore]

[hit@lager]
on_info = %+esc_open_lager_fire%

[death@lager]
on_info = %+esc_open_lager_fire%

[death@fanat]
on_info = %+esc_open_lager_fire +esc_fanat_die%

[hit@killers]
on_info = %+esc_open_lager_fire +esc_open_killer_fire%

[death@killers]
on_info = %+esc_open_lager_fire +esc_open_killer_fire%

;-------------------------------------------------------------------------------------------------
;-- ESCAPE FACTORY BANDITS
;-------------------------------------------------------------------------------------------------
[logic@esc_fabrika_bandit_walker1]
active = walker1@esc_fabrika_bandit

[walker1@esc_fabrika_bandit]
path_walk = day_walk1
path_look = day_look1
def_state_moving = raid
def_state_moving_fire = raid_fire
def_state_campering = threat
def_state_campering_fire = threat_fire


[logic@esc_fabrika_bandit_walker2]
active = walker2@esc_fabrika_bandit

[walker2@esc_fabrika_bandit]
path_walk = day_walk2
path_look = day_look2


[logic@esc_fabrika_bandit_walker3]
active = walker3@esc_fabrika_bandit

[walker3@esc_fabrika_bandit]
path_walk = day_walk3
path_look = day_look3
def_state_moving = raid
def_state_moving_fire = raid_fire
def_state_campering = threat
def_state_campering_fire = threat_fire


[logic@esc_fabrika_bandit_walker4]
active = walker4@esc_fabrika_bandit

[walker4@esc_fabrika_bandit]
path_walk = day_walk4
path_look = day_look4


[logic@esc_fabrika_bandit_kamp]
active = kamp@esc_fabrika_bandit

[kamp@esc_fabrika_bandit]
center_point = camp_center
;path_walk = camp_center_task
soundgroup = esc_bandits_factory


[camper@esc_fabrika_bandit_walker1]
active = walker11@esc_fabrika_bandit

[walker11@esc_fabrika_bandit]
path_walk = day_alarm_walk1
path_look = day_alarm_look1


[camper@esc_fabrika_bandit_walker2]
active = walker22@esc_fabrika_bandit

[walker22@esc_fabrika_bandit]
path_walk = day_alarm_walk2
path_look = day_alarm_look2


[camper@esc_fabrika_bandit_walker3]
active = walker33@esc_fabrika_bandit

[walker33@esc_fabrika_bandit]
path_walk = day_alarm_walk3
path_look = day_alarm_look3


[camper@esc_fabrika_bandit_walker4]
active = walker44@esc_fabrika_bandit

[walker44@esc_fabrika_bandit]
path_walk = day_alarm_walk4
path_look = day_alarm_look4


[camper@esc_fabrika_bandit_walker5]
active = walker55@esc_fabrika_bandit

[walker55@esc_fabrika_bandit]
path_walk = day_alarm_walk5
path_look = day_alarm_look5


[camper@esc_fabrika_bandit_walker6]
active = walker66@esc_fabrika_bandit

[walker66@esc_fabrika_bandit]
path_walk = day_alarm_walk6
path_look = day_alarm_look6


[camper@esc_fabrika_bandit_walker7]
active = walker7@esc_fabrika_bandit

[walker7@esc_fabrika_bandit]
path_walk = day_night_sniper_walk
path_look = day_night_sniper_look



;-----------------------------------
;----- Soldiers on the bridge ------
;-----------------------------------

[logic@esc_bridge_post1]
active = walker@esc_bridge_post1
combat_ignore = combat_ignore@esc_bridge
on_hit = hit@soldier
on_death = death@soldier

[walker@esc_bridge_post1]
path_walk = post1_walk
path_look = post1_look
combat_ignore_cond = {-esc_bridge_pass_fire =fighting_actor}


[logic@esc_bridge_post2]
active = walker@esc_bridge_post2
combat_ignore = combat_ignore@esc_bridge
on_hit = hit@soldier
on_death = death@soldier

[walker@esc_bridge_post2]
path_walk = post2_walk
path_look = post2_look
meet = meet@sold_zoneguard
combat_ignore_cond = {-esc_bridge_pass_fire =fighting_actor}


[logic@esc_bridge_post3]
active = walker@esc_bridge_post3
combat_ignore = combat_ignore@esc_bridge
on_hit = hit@soldier
on_death = death@soldier

[walker@esc_bridge_post3]
path_walk = post3_walk
path_look = post3_look
combat_ignore_cond = {-esc_bridge_pass_fire =fighting_actor}


[logic@esc_bridge_post4]
active = walker@esc_bridge_post4
combat_ignore = combat_ignore@esc_bridge
on_hit = hit@soldier
on_death = death@soldier

[walker@esc_bridge_post4]
path_walk = post4_walk
path_look = post4_look
meet = meet@sold_zoneguard
combat_ignore_cond = {-esc_bridge_pass_fire =fighting_actor}


[logic@esc_bridge_post5]
active = walker@esc_bridge_post5
on_hit = hit@soldier
on_death = death@soldier
combat_ignore = combat_ignore@esc_bridge

[walker@esc_bridge_post5]
path_walk = post5_walk
path_look = post5_look
combat_ignore_cond = {-esc_bridge_pass_fire =fighting_actor}


[logic@esc_bridge_kamp1]
active = kamp@esc_bridge_post1

[kamp@esc_bridge_post1]
center_point = kamp_point
path_walk = kamp_point_task
soundgroup = esc_bridge_soldiers


[logic@esc_bridge_kamp2]
active = kamp@esc_bridge_post2

[kamp@esc_bridge_post2]
center_point = kamp_point
path_walk = kamp_point_task
soundgroup = esc_bridge_soldiers


[logic@esc_bridge_kamp3]
active = kamp@esc_bridge_post3

[kamp@esc_bridge_post3]
center_point = kamp_point
path_walk = kamp_point_task
soundgroup = esc_bridge_soldiers


[logic@esc_bridge_kamp4]
active = kamp@esc_bridge_post4

[kamp@esc_bridge_post4]
center_point = kamp_point
path_walk = kamp_point_task
soundgroup = esc_bridge_soldiers


[logic@esc_bridge_patrol]
active = walker@esc_bridge_patrol

[walker@esc_bridge_patrol]
path_walk = patrol_walk
path_look = patrol_look


[meet@sold_zoneguard]
meet_state 		= 20| {+esc_bridge_pass_on} wait, threat@ {+esc_bridge_pass_on} talk_hello, threat_back
meet_state_wpn 	= 20| {+esc_bridge_pass_on} wait, threat@ {+esc_bridge_pass_on} talk_hello, threat_back
victim 			= 20| actor
victim_wpn 		= 20| actor
use			= true
use_wpn		= true
zone			= esc_bridge_kill_zone|{-esc_bridge_pass_on} threat@ {-esc_path_to_lager} esc_guard_camp| esc_lager_guard_kill_zone| {-esc_path_to_lager} true@ {-esc_path_to_lager} talk_abuse
meet_dialog		= esc_bridge_soldiers_start

[combat_ignore@esc_bridge]
combat_ignore_cond = {-esc_bridge_pass_fire =fighting_actor}

[hit@soldier]
on_info = {=hit_by_actor} %+esc_bridge_pass_fire%

[death@soldier]
on_info = {=hit_by_actor} %+esc_bridge_pass_fire%

;-------------------------------
;---------- Killers ------------
;-------------------------------
[logic@esc_killer_leader_raid]
active = walker@esc_killer_leader_raid
on_hit = hit@killers
on_death = death@killers
combat_ignore = combat_ignore

[walker@esc_killer_leader_raid]
path_walk = raid1_walk
path_look = raid1_look
combat_ignore_cond = {-esc_open_killer_fire}
def_state_moving = patrol
team = killers
on_signal = fires| remark@esc_killer_leader_raid %=esc_direction_fire%

[remark@esc_killer_leader_raid]
snd = esc_lager_killer
anim = guard
on_timer = 15000| %+esc_open_lager_fire%
combat_ignore_cond = {-esc_open_killer_fire}



[logic@esc_killer1_raid]
active = walker@esc_killer1_raid
on_hit = hit@killers
on_death = death@killers
combat_ignore = combat_ignore

[walker@esc_killer1_raid]
path_walk = raid2_walk
path_look = raid2_look
team = killers
combat_ignore_cond = {-esc_open_killer_fire}
def_state_moving = patrol


[logic@esc_killer2_raid]
active = walker@esc_killer2_raid
on_hit = hit@killers
on_death = death@killers
combat_ignore = combat_ignore

[walker@esc_killer2_raid]
path_walk = raid3_walk
path_look = raid3_look
team = killers
combat_ignore_cond = {-esc_open_killer_fire}
def_state_moving = patrol


[logic@esc_killer3_raid]
active = walker@esc_killer3_raid
on_hit = hit@killers
on_death = death@killers
combat_ignore = combat_ignore

[walker@esc_killer3_raid]
path_walk = raid4_walk
path_look = raid4_look
combat_ignore_cond = {-esc_open_killer_fire}
def_state_moving = patrol


[logic@esc_killer4_raid]
active = walker@esc_killer4_raid
on_hit = hit@killers
on_death = death@killers
combat_ignore = combat_ignore

[walker@esc_killer4_raid]
path_walk = raid5_walk
path_look = raid5_look
combat_ignore_cond = {-esc_open_killer_fire}
def_state_moving = patrol


[logic@esc_killer5_raid]
active = walker@esc_killer5_raid
on_hit = hit@killers
on_death = death@killers
combat_ignore = combat_ignore

[walker@esc_killer5_raid]
path_walk = raid6_walk
path_look = raid6_look
combat_ignore_cond = {-esc_open_killer_fire}
def_state_moving = patrol


[logic@esc_killer1_follower]
active = follower@esc_killer1_follower
on_hit = hit@killers
on_death = death@killers
combat_ignore = combat_ignore

[follower@esc_killer1_follower]
anim_walk = patrol
anim_run = rush
distance = 2
combat_ignore_cond = {-esc_open_killer_fire}
path_walk = raid2_walk


[logic@esc_killer2_follower]
active = follower@esc_killer2_follower
on_hit = hit@killers
on_death = death@killers
combat_ignore = combat_ignore

[follower@esc_killer2_follower]
anim_walk = patrol
anim_run = rush
distance = 2
combat_ignore_cond = {-esc_open_killer_fire}
path_walk = raid3_walk


[logic@esc_killer_fight]
active = walker@esc_killers_fight

[walker@esc_killers_fight]
path_walk = lager_patrol


[logic@esc_killer_kamp]
active = kamp@esc_killer_kamp

[kamp@esc_killer_kamp]
center_point = kamp
path_walk = kamp_task
soundgroup = esc_killers



[logic@esc_killer_kamp_wait]
active = kamp@esc_killer_kamp_wait

[kamp@esc_killer_kamp_wait]
center_point = kamp_wait
soundgroup = esc_killers_wait


[logic@esc_killer_kamp_guard1]
active = camper@esc_killer_kamp_guard1

[camper@esc_killer_kamp_guard1]
path_walk = kamp_guard_walk1
path_look = kamp_guard_look1


[logic@esc_killer_kamp_guard2]
active = camper@esc_killer_kamp_guard2

[camper@esc_killer_kamp_guard2]
path_walk = kamp_guard_walk2
path_look = kamp_guard_look2


[logic@esc_killer_kamp_guard3]
active = camper@esc_killer_kamp_guard3

[camper@esc_killer_kamp_guard3]
path_walk = kamp_guard_walk3
path_look = kamp_guard_look3


;--------------------------
;-------- ЗАСАДА ----------
;--------------------------
[logic@esc_ambush1]
active = walker@esc_ambush1

[walker@esc_ambush1]
path_walk = walk1
path_look = look1


[logic@esc_ambush2]
active = walker@esc_ambush2

[walker@esc_ambush2]
path_walk = walk2
path_look = look2

;------------------------------
;------ Трупы у вагона --------
;------------------------------
[logic@esc_corps1]
active = walker@esc_corps1
on_death = death@corps1

[walker@esc_corps1]
path_walk = walk1
path_look = look1
on_info = {+esc_heli_attack} walker@heli_hunter_esc_corps1

[walker@heli_hunter_esc_corps1]
path_walk = walk1
path_look = look1
heli_hunter = true
danger = danger_condition@corps


[logic@esc_corps2]
active = walker@esc_corps2
on_death = death@corps2

[walker@esc_corps2]
path_walk = walk2
path_look = look2
on_info = {+esc_heli_attack} walker@heli_hunter_esc_corps2

[walker@heli_hunter_esc_corps2]
path_walk = walk2
path_look = look2
heli_hunter = true
danger = danger_condition


[danger_condition@corps]
ignore_distance = 0

[death@corps1]
on_info = %+esc_first_novice_dead%

[death@corps2]
on_info = %+esc_second_novice_dead%



[logic@esc_corps_wounded]
active = walker@normal_esc_corps_wounded
on_death = death@esc_corps_wounded

[walker@normal_esc_corps_wounded]
path_walk = esc_wounded_walk
path_look = esc_wounded_look
on_info = {+esc_first_novice_dead +esc_second_novice_dead} walker@wounded_esc_corps_wounded
danger = danger_condition@tolik

[walker@wounded_esc_corps_wounded]
path_walk = esc_wounded_walk
path_look = esc_wounded_look
wounded = wounded@esc_corps_wounded
on_info = {+tutorial_wounded_help} remark@thanks_esc_corps_wounded
danger = danger_condition@tolik
meet = meet@esc_corps_wounded

[remark@thanks_esc_corps_wounded]
anim = guard
snd = esc_tolik_thanks
on_signal = sound_end| walker@to_lager_esc_corps_wounded
danger = danger_condition@tolik
meet = meet@esc_corps_wounded

[walker@to_lager_esc_corps_wounded]
path_walk = esc_vagon_wounded_to_lager
path_look = esc_wounded_to_lager_look
on_signal2 = thanks| remark@esc_corps_wounded
on_signal = lager_pass| %+esc_path_to_lager%

[remark@esc_corps_wounded]
snd = esc_tolik_to_wolf
anim = guard
on_signal = sound_end| remark@to_gulag_esc_corps_wounded
no_rotate = true

[remark@to_gulag_esc_corps_wounded]
on_actor_dist_ge_nvis = 12| walker@to_gulag_esc_corps_wounded %=esc_wolf_thanks%
on_actor_dist_le_nvis = 12| walker@to_gulag_esc_corps_wounded %+esc_wolf_say%
anim = guard
no_rotate = true

[walker@to_gulag_esc_corps_wounded]
path_walk = esc_to_gulag
on_signal = wounded_arrive| %+esc_wounded_arrive%

[wounded@esc_corps_wounded]
hp_state = 35|help_me@help|10|wounded_heavy@help_heavy
hp_state_see = 35|wounded@esc_tolik_help|10|wounded_heavy@help_heavy
psy_state = 50|{=best_pistol}psy_armed,psy_pain@wounded_psy|20| {=best_pistol}psy_shoot,psy_pain@{=best_pistol}wounded_psy_shoot,wounded_psy
hp_victim = 35|actor|10|nil
hp_cover = 35|false|10|false
hp_fight = 35|false|10|false
syndata = wounded@help
help_dialog = tutorial_wounded_give_medkit

[meet@esc_corps_wounded]
meet_state	= 2|hello@wait|1|wait@wait
meet_state_wpn	= 2|hello@wait|1|wait@wait
victim		= 1|actor
victim_wpn	= 1|actor
use		= true
use_wpn		= true
syndata		= hello@hail|backoff@threat_weap


[danger_condition@tolik]
ignore_distance = 0


[death@esc_corps_wounded]
on_info = {=killed_by_actor} %+tutorial_wounded_die%, %+tutorial_wounded_death%

;------------------------------
;------- Dogs to fox ----------
;------------------------------

[logic@esc_dogs_to_fox_home]
active = mob_home@esc_dogs_to_fox_home

[mob_home@esc_dogs_to_fox_home]
path_home = path1
home_min_radius = 15
home_max_radius = 30


[logic@esc_dogs_to_fox]
active = mob_home@esc_dogs_to_fox_home2

[mob_home@esc_dogs_to_fox_home2]
path_home = path2
home_min_radius = 5
home_max_radius = 10

;------------------------------
;-------- Dogs swarm ----------
;------------------------------

[logic@esc_dogs_swarm1]
active = mob_home@esc_dogs_swarm1

[mob_home@esc_dogs_swarm1]
path_home = path1
home_min_radius = 30
home_max_radius = 50


[logic@esc_dogs_swarm2]
active = mob_home@esc_dogs_swarm1

[mob_home@esc_dogs_swarm2]
path_home = path2
home_min_radius = 30
home_max_radius = 50


[logic@esc_dogs_swarm3]
active = mob_home@esc_dogs_swarm3

[mob_home@esc_dogs_swarm3]
path_home = path3
home_min_radius = 30
home_max_radius = 50


;------------------------------
;-----Boars Dogs rush ---------
;------------------------------

[logic@esc_boars_dogs]
active = mob_home@esc_boars_dogs

[mob_home@esc_boars_dogs]
path_home = home_point
home_min_radius = 45
home_max_radius = 70


;----------------------------
;------ zombie_1 ------------
;----------------------------

[logic@esc_zombie_1_fd]
active = mob_home@esc_zombie_1_fd

[mob_home@esc_zombie_1_fd]
path_home = home_point
home_min_radius = 20
home_max_radius = 35
on_actor_dist_le_nvis = 40| mob_fake_death@esc_zombie_1_fd

[mob_fake_death@esc_zombie_1_fd]
on_actor_dist_le = 5| mob_home@esc_zombie_1_fd
on_info = {+esc_zombie_rise2} mob_home@esc_zombie_1_fd_1

[mob_home@esc_zombie_1_fd_1]
path_home = home_point
home_min_radius = 20
home_max_radius = 35
on_actor_dist_le_nvis = 40| mob_fake_death@esc_zombie_1_fd_1

[mob_fake_death@esc_zombie_1_fd_1]
on_actor_dist_le = 5| mob_home@esc_zombie_1_fd_1



;--------------------------
;------- zombie2 ----------
;--------------------------
[logic@esc_zombie_2_home]
active = mob_home@esc_zombie_2_home

[mob_home@esc_zombie_2_home]
path_home = home
home_min_radius = 60
home_max_radius = 90


;-------------------------
;------- Flesh 1 ---------
;-------------------------
[logic@esc_flesh_1_camp]
active = mob_camp@esc_flesh_1_camp

[mob_camp@esc_flesh_1_camp]
path_look = look
path_home = walk
time_change_point = 60000
home_min_radius = 15
home_max_radius = 30

;-------------------------
;------- Flesh 2 ---------
;-------------------------
[logic@esc_flesh_2_camp]
active = mob_camp@esc_flesh_2_camp

[mob_camp@esc_flesh_2_camp]
path_look = look
path_home = walk
time_change_point = 60000
home_min_radius = 15
home_max_radius = 30


;------------------------
;--- Атака на Фабрику ---
;------------------------
[logic@esc_assault1]
active = kamp@esc_assault1
on_hit = hit@esc_assault1
on_death = death@esc_assault1
combat_ignore = combat_ignore

[hit@esc_assault1]
on_info = %+esc_assault_start%

[death@esc_assault1]
on_info = %+esc_assault_start%

[kamp@esc_assault1]
center_point = kamp_center
path_walk = kamp_center_task
on_info = {+esc_bandits_assault} patrol@esc_assault1

[patrol@esc_assault1]
path_walk = escape_factory_way1
path_look = escape_factory_look1
formation = back
on_info = {+esc_kill_bandits_quest_kill} walker2@esc_assault1
on_info2 = {+esc_assault_start} walker@fight_esc_assault1
combat_ignore_cond = {-esc_assault_start}

[walker@fight_esc_assault1]
path_walk = final3
path_look = final3_look
on_info = {+esc_kill_bandits_quest_kill}walker2@esc_assault1
def_state_moving3 = assault

[walker2@esc_assault1]
path_walk = escape_factory_return_path
on_signal = b_final | %+esc_assault_to_lager%


[logic@esc_assault2]
active = kamp@esc_assault2
on_hit = hit@esc_assault1
on_death = death@esc_assault1
combat_ignore = combat_ignore

[kamp@esc_assault2]
center_point = kamp_center
path_walk = kamp_center_task
on_info = {+esc_bandits_assault} patrol@esc_assault2

[patrol@esc_assault2]
path_walk = escape_factory_way1
path_look = escape_factory_look1
formation = back
on_info = {+esc_kill_bandits_quest_kill} walker2@esc_assault2
on_info2 = {+esc_assault_start} walker@fight_esc_assault2
combat_ignore_cond = {-esc_assault_start}

;[walker]
;path_walk = escape_factory_way2
;path_look = escape_factory_look2
;team = escape_attack_team
;on_signal = flight | walker@fight 
;on_info = {+esc_kill_bandits_quest_kill}walker2
;combat_ignore_cond = {-esc_assault_start}

[walker@fight_esc_assault2]
path_walk = final2
path_look = final2_look
on_info = {+esc_kill_bandits_quest_kill} walker2@esc_assault2
def_state_moving3 = assault

[walker2@esc_assault2]
path_walk = escape_factory_return_path
on_signal = b_final | %+esc_assault_to_lager%



[logic@esc_assault3]
active = walker1@esc_assault3
on_hit = hit@esc_assault1
on_death = death@esc_assault3
combat_ignore = combat_ignore

[death@esc_assault3]
on_info = %+esc_assault_start +esc_petruha_die%

[walker1@esc_assault3]
path_walk = escape_btr_path1
path_look = escape_btr_look1
on_info = {+esc_bandits_start} walker@to_kamp_esc_assault3
meet = meet@attacker

[walker@to_kamp_esc_assault3]
path_walk = esc_to_camp_walk
path_look = esc_to_camp_look
on_signal = bandits_assault| remark@kamp_esc_assault3 %+esc_bandits_assault%

[remark@kamp_esc_assault3]
anim = guard
snd = esc_factory_raid
on_signal = sound_end| patrol@esc_assault3
no_rotate = true

[patrol@esc_assault3]
path_walk = escape_factory_way1
path_look = escape_factory_look1
commander = true
formation = back
on_signal = flight| walker@fight_esc_assault3 %+esc_assault_start%
on_info = {+esc_kill_bandits_quest_kill} walker2@esc_assault3
combat_ignore_cond = {-esc_assault_start}

;[walker]
;path_walk = escape_factory_way1
;path_look = escape_factory_look1
;team = escape_attack_team
;on_signal = flight | remark
;on_info = {+esc_kill_bandits_quest_kill} walker2
;combat_ignore_cond = {-esc_assault_start}

;[remark]
;anim = hide
;snd = esc_factory_attack
;combat_ignore_cond = {-esc_assault_start}
;on_signal = sound_end| walker@fight %+esc_assault_start%

[walker@fight_esc_assault3]
path_walk = final1
path_look = final1_look
on_info = {+esc_kill_bandits_quest_kill} remark@victory_esc_assault3
def_state_moving3 = assault

[remark@victory_esc_assault3]
anim = hello
snd = esc_factory_victory
on_signal = sound_end| walker2@esc_assault3

[walker2@esc_assault3]
path_walk = escape_factory_return_path
meet = meet@attacker
on_signal = b_final | %+esc_assault_to_lager%

[meet@attacker]
meet_state	= 5|wait@wait
meet_state_wpn	= 5|wait@wait
victim		= 5|actor
victim_wpn	= 5|actor
use		= true
use_wpn		= false
syndata		= hello@hail
meet_dialog	= escape_factory_assault_start

