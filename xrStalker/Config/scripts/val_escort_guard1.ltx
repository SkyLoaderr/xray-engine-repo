[logic]
active = remark@switch
on_death = death
on_hit = hit
combat_ignore = combat_ignore
on_combat = combat

[death]
on_info = %-val_escort_guard1_combat +val_escort_guard1_dead%
on_info2 = {=killed_by_actor} %+val_escort_actor_helped%

[hit]
on_info = {=hit_by_actor} %+val_escort_combat +val_escort_actor_helped%
on_file2 = {+val_escort_actor_helped -val_escort_nap1_start_combat} %+val_escort_actor_start_combat%
on_info3 = {=val_hit_by_nap1 -val_escort_actor_start_combat} %+val_escort_nap1_start_combat%
;on_info4 = {=val_hit_by_nap1} %=val_escort_nap1_enemy%

[combat]
on_info = %+val_escort_guard1_combat%
on_info2 = {=see_actor -val_escort_combat} %+val_escort_combat +val_escort_actor_start_combat%

[remark@switch]
on_info = {+val_escort_start} follower@walk %=val_escort_captive_friend% ; =val_escort_nap1_friend%
combat_ignore_cond = always

[follower@walk]
leader = 400
anim_walk = patrol
anim_run = assault
no_retreat = true
on_info = {+val_escort_combat} remark@fight
on_info2 = {+val_escort_nap1_dead} walker@return, {+val_escort_captive_dead} walker@return %-val_escort_guard1_combat%, %-val_escort_guard1_combat%
combat_ignore_cond = {-val_escort_combat !see_actor}
;on_signal = leader_dead | walker@return

[combat_ignore]

[remark@fight]
no_retreat = true
on_info = {+val_escort_nap1_dead} walker@return, {+val_escort_captive_dead} walker@return %-val_escort_guard1_combat%, %-val_escort_guard1_combat%
on_info2 = {+val_escort_actor_start_combat} %=val_escort_captive_enemy%
;combat_ignore_cond = {=val_fighting_captive -val_escort_actor_start_combat}

[walker@return]
path_walk = val_escort_guard1_return_walk 
path_look = val_escort_guard1_return_look
