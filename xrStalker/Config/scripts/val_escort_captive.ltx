[logic]
active = remark@start
on_death = death
combat_ignore = combat_ignore

[death]
on_info = %+val_escort_captive_dead%

[combat_ignore]

;--------------------------------------------------------------------------
; стандартный диалог
;--------------------------------------------------------------------------
[meet@def]
meet_dialog = val_escort_captive_dialog
meet_state = 3|wait
meet_state_wpn = 3|wait
victim = 30|actor
victim_wpn = 20|actor
use = true
use_wpn = true

;--------------------------------------------------------------------------
; 
;--------------------------------------------------------------------------
[remark@start]
no_move = true
no_rotate = true
anim = wait
on_info = {+val_escort_start} walker@go

;--------------------------------------------------------------------------
[walker@go]
path_walk = val_escort_captive_walk
path_look = val_escort_captive_look
on_signal = fight | %+val_escort_combat -val_escort_wait%
on_info = {+val_escort_guard1_combat} remark@wait, {+val_escort_guard2_combat} remark@wait, {+val_escort_guard3_combat} remark@wait
on_info2 = {+val_escort_guard1_dead +val_escort_guard2_dead} walker@leave %+val_escort_captive_can_leave%
combat_ignore_cond = always

;--------------------------------------------------------------------------
[remark@wait]
no_move = true
no_rotate = true
anim = hide
;on_info = {=val_escort_combat_end} walker@leave
on_info = {+val_escort_guard1_dead +val_escort_guard2_dead} remark@talk
on_info2 = {-val_escort_guard1_combat -val_escort_guard2_combat -val_escort_guard3_combat} walker1
combat_ignore_cond = always

;--------------------------------------------------------------------------
[remark@talk]
meet = meet@def
on_timer = 60000 | walker@leave

;--------------------------------------------------------------------------
[walker@leave]
path_walk = val_escort_captive_leave_walk
path_look = val_escort_captive_leave_look
meet = meet@def
;combat_ignore_cond = always
on_signal = arrived | nil %+val_escort_captive_offline%
