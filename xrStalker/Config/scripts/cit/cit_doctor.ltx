[logic]
active              = walker@guard1
combat_ignore       = combat_ignore

;-----------------------------------------------------------------------------------------------------------
;--- патрулируем возле решетки
;-----------------------------------------------------------------------------------------------------------
[walker@guard1]
path_walk           = cit_jail_guard1_walk
path_look           = cit_jail_guard1_look
on_info             = {+cit_jail_guard2_talk_to_guard1} remark@look_at_guard2_1
combat_ignore_cond  = {=fighting_actor -cit_jail_door_opened}, {=check_fighting(1201)}

;-----------------------------------------------------------------------------------------------------------
;--- слушаем, что нам говорит второй охранник
;-----------------------------------------------------------------------------------------------------------
[remark@look_at_guard2_1]
anim                = wait
target              = 1202 ; guard2
on_info             = {+cit_jail_doctor_out_start} walker@open_door
combat_ignore_cond  = {=fighting_actor -cit_jail_door_opened}, {=check_fighting(1201)}

;-----------------------------------------------------------------------------------------------------------
;--- открываем решетку, чтоб выпустить доктора
;-----------------------------------------------------------------------------------------------------------
[walker@open_door]
path_walk           = cit_jail_guard1_button_press_walk
path_look           = cit_jail_guard1_button_press_look
on_signal           = pressed | remark@look_at_actor %+cit_jail_door_opened%
combat_ignore_cond  = {=fighting_actor -cit_actor_near_grates}, {=check_fighting(1201)}

;-----------------------------------------------------------------------------------------------------------
;--- смотрим за актером, шоб не сбежал
;-----------------------------------------------------------------------------------------------------------
[remark@look_at_actor]
anim                = threat
target              = actor
on_info             = {+cit_jail_guard1_close_door} walker@close_door
combat_ignore_cond  = {=fighting_actor -cit_actor_near_grates}, {=check_fighting(1201)}

;-----------------------------------------------------------------------------------------------------------
;--- закрываем решетку, чтоб выпустить доктора
;-----------------------------------------------------------------------------------------------------------
[walker@close_door]
path_walk           = cit_jail_guard1_button_press_walk
path_look           = cit_jail_guard1_button_press_look
on_signal           = pressed | walker@guard2 %-cit_jail_door_opened%
combat_ignore_cond  = {=fighting_actor -cit_actor_near_grates}, {=check_fighting(1201)}

;-----------------------------------------------------------------------------------------------------------
;--- патрулируем возле решетки
;-----------------------------------------------------------------------------------------------------------
[walker@guard2]
path_walk           = cit_jail_guard1_walk
path_look           = cit_jail_guard1_look
combat_ignore_cond  = {=fighting_actor -cit_jail_door_opened}, {=check_fighting(1201)}
