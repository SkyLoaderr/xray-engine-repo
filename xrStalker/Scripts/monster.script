----------------------------------------------------------------------------------------------------
-- Monster binding
----------------------------------------------------------------------------------------------------
-- Разработчик: Evgeniy Negrobov (Jon) jon@gsc-game.kiev.ua
-- Доработки: Andrey Fidrya (Zmey) af@svitonline.com
----------------------------------------------------------------------------------------------------

--odule("bloodsucker")
--odule("monster_bind")
--odule("pripyat_football")
--odule("monster_gameplay")

function bind(obj)
	xr_motivator.storage[obj:id()] = { }

	local char_ini = obj:spawn_ini()
	if not char_ini then
		return
	end

	if (char_ini:section_exist("old_trader")) then
		trader.bind()
		return
	end

	// Для спауна
	xr_spawner.spawn_client(obj)

	----------------------------------------------------------------------------------------
	-- Старые схемы
	----------------------------------------------------------------------------------------

	// Читер на ростке(кровосос)
	if(char_ini:section_exist("rostok_bloodsuceker")) then
		obj:bind_object(bloodsucker.CRostokBloodSucker(obj))
	end
	
	// Собака доктора
	if(char_ini:section_exist("outcast_dog")) then
		obj:bind_object(monster_bind.COutcastDog(obj))
	end

	// Монстр, который после смерти пинает труп
	if(char_ini:section_exist("play_with_corpse")) then
		obj:bind_object(monster_bind.CNecrophil(obj))
	end
	
	// Монтры, которые играю в футбол
	if(char_ini:section_exist("play_football")) then
		obj:bind_object(pripyat_football.CFootballPlayer(obj))
	end

	// Контролер, тренер монстров игроков
	if(char_ini:section_exist("controler_trainer")) then
		obj:bind_object(pripyat_football.CControlerTrainer(obj))
	end
	
	// Сюжетные и не только скрипты
	if(char_ini:section_exist("gameplay")) then
		monster_gameplay.bind(obj, char_ini)
	end

	----------------------------------------------------------------------------------------
	-- Новые схемы
	----------------------------------------------------------------------------------------

	xr_logic.stalker_enable_scripts(obj, char_ini)
end
	


//-------------------------------------------------------------------------------------------
// Шаблон для скриптов, где монстр будет биндится
//-------------------------------------------------------------------------------------------
class "template" (object_binder)
function template:__init(obj) super(obj)
end 

function template:reload(section)
	object_binder.reload(self, section)
end

function template:update(delta)
	object_binder.update(self, delta)
end

function template:net_destroy()
	object_binder.net_destroy(self)
end 