local actor_entered = false

function on_enter (zone,object)
	printf ("Actor entered")
    actor_entered = true
end


function main ()

	local stalker1 = get_level_object ("stalker1")
	local stalker2 = get_level_object ("stalker2")
	local stalker3 = get_level_object ("stalker3")

	stalker1:script (true, military2_1.script_name ())
	stalker2:script (true, military2_1.script_name ())
	stalker3:script (true, military2_1.script_name ())

	local zone = get_level_object ("script_zone")

  	zone:clear_callback(true)
    zone:clear_callback(false)
    zone:set_callback (this.on_enter, true)

	action (stalker1, move (move.standing, move.stand, move.line, patrol ("way_test")),
			anim (anim.free), cond (cond.time_end, 100000000))		
	action (stalker2, move (move.standing, move.stand, move.line, patrol ("way_test")),
			anim (anim.free), cond (cond.time_end, 100000000))		
	action (stalker3, move (move.standing, move.stand, move.line, patrol ("way_test")),
			anim (anim.free), cond (cond.time_end, 100000000))		

	while actor_entered == false do wait () end

	printf ("actor entered")
	reset_action (stalker1, military2_1.script_name ())
	reset_action (stalker2, military2_1.script_name ())
	reset_action (stalker3, military2_1.script_name ())

	printf ("Reset stalkers")

	action (stalker1, move (move.standing, move.stand, move.line, patrol ("way_test")),
			anim ("stalker_1_1"), cond (cond.time_end, 100000000))		
	action (stalker2, move (move.standing, move.stand, move.line, patrol ("way_test")),
			anim ("stalker_2_1"), cond (cond.time_end, 100000000))		
	action (stalker3, move (move.standing, move.stand, move.line, patrol ("way_test")),
			anim ("stalker_3_1"), cond (cond.time_end, 100000000))		

	while true do wait () end	

	stalker1:script (false, military2_1.script_name ())
	stalker2:script (false, military2_1.script_name ())
	stalker3:script (false, military2_1.script_name ())

end