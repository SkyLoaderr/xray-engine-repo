local t

function loadJob(sj, gname, type, squad, groups)
	if type == "test" then
		t = { section = "logic@walker1",
			idle = 0,
			prior = 0, state = {0},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
		t = { section = "logic@walker2",
			idle = 0,
			prior = 0, state = {0},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
		t = { section = "logic@walker3",
			idle = 0,
			prior = 0, state = {0},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
	end

	if type == "test1" then
		t = { section = "logic@test1_sleeper",
			idle = 0,
			prior = 0, state = {0},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
	end

	if type == "test_mob" then
		t = { section = "logic@test_mob_mob_walker",
			idle = 0,
			prior = 0, state = {0},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
	end
--'--------------------------------------------------------------------------	
--' Универсальные гулаги для smart terrain
--'--------------------------------------------------------------------------
	--' несколько кемперов
	if type == "campers" then
		for i = 1, 3 do
			t = { section = "logic@campers_camper"..i,
				idle = 0,
				prior = 0, state = {0},
				squad = squad, group = groups[i],
				in_rest = "", out_rest = ""
			}
			table.insert(sj, t)
		end
	end
	--' несколько walkers
	if type == "walkers" then
		for i = 1, 3 do
			t = { section = "logic@walkers_walker"..i,
				idle = 0,
				prior = 0, state = {0},
				squad = squad, group = groups[i],
				in_rest = "", out_rest = ""
			}
			table.insert(sj, t)
		end
	end
	--' один walker
	if type == "search" then
		t = { section = "logic@search_walker",
			idle = 0,
			prior = 0, state = {0},
			squad = squad, group = groups[i],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
	end
	--' отдых
	if type == "rest" then
		t = { section = "logic@rest_rest",
			idle = 0,
			prior = 0, state = {0},
			squad = squad, group = groups[i],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
	end
--'--------------------------------------------------------------------------	
--' ESCAPE
--'--------------------------------------------------------------------------
	--' Escape blockpost
	if type == "blockpost" then
		t = { section = "logic@esc_blockpost_patrol1",
			idle = 4 * 1000 * 60 * 60,
			prior = 8, state = {0,1,2}, squad = squad, group = groups[2],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)		
		t = { section = "logic@esc_blockpost_follower1",
			idle = 4 * 1000 * 60 * 60,
			prior = 7, state = {0,1,2}, squad = squad, group = groups[2],
			in_rest = "", out_rest = "",
			leader = "logic@esc_blockpost_patrol1"
		}
		table.insert(sj, t)		
		t = { section = "logic@esc_blockpost_follower2",
			idle = 4 * 1000 * 60 * 60,
			prior = 7, state = {0,1,2}, squad = squad, group = groups[2],
			in_rest = "", out_rest = "",
			leader = "logic@esc_blockpost_patrol1"
		}
		table.insert(sj, t)
		t = { section = "logic@esc_blockpost_camper1",
			idle = 0,
			prior = 10, state = {0,1,2}, squad = squad, group = groups[3],
			in_rest = "", out_rest = "escape_blockpost_zone"
		}
		table.insert(sj, t)
		t = { section = "logic@esc_blockpost_walker2",
			idle = 0,
			prior = 9, state = {0}, squad = squad, group = groups[3],
			in_rest = "", out_rest = "escape_blockpost_zone"
		}
		table.insert(sj, t)
		t = { section = "logic@esc_blockpost_walker3",
			idle = 0,
			prior = 9, state = {0}, squad = squad, group = groups[3],
			in_rest = "", out_rest = "escape_blockpost_zone"
		}
		table.insert(sj, t)
		t = { section = "logic@esc_blockpost_kamp1",
			idle = 0,
			prior = 5, state = {0,1},  squad = squad, group = groups[1],
			in_rest = "", out_rest = "escape_blockpost_zone"
		}
		table.insert(sj, t)
		t = { section = "logic@esc_blockpost_kamp1",
			idle = 0,
			prior = 5, state = {0,1}, squad = squad, group = groups[1],
			in_rest = "", out_rest = "escape_blockpost_zone"
		}
		table.insert(sj, t)
		t = { section = "logic@esc_blockpost_kamp1",
			idle = 0,
			prior = 5, state = {0,1}, squad = squad, group = groups[1],
			in_rest = "", out_rest = "escape_blockpost_zone"
		}
		table.insert(sj, t)
		t = { section = "logic@esc_blockpost_sleeper1",
			idle = 0,
			prior = 0, state = {0,1,2}, squad = squad, group = groups[4],
			in_rest = "", out_rest = "escape_blockpost_zone"
		}
		table.insert(sj, t)
		t = { section = "logic@esc_blockpost_sleeper2",
			idle = 0,
			prior = 0, state = {0,1,2}, squad = squad, group = groups[4],
			in_rest = "", out_rest = "escape_blockpost_zone"
		}
		table.insert(sj, t)
		t = { section = "logic@esc_blockpost_sleeper3",
			idle = 0,
			prior = 0, state = {0,1,2}, squad = squad, group = groups[4],
			in_rest = "", out_rest = "escape_blockpost_zone"
		}
		table.insert(sj, t)
		t = { section = "logic@esc_blockpost_sleeper4",
			idle = 0,
			prior = 0, state = {0,1,2}, squad = squad, group = groups[4],
			in_rest = "", out_rest = "escape_blockpost_zone"
		}
		table.insert(sj, t)
		t = { section = "logic@esc_blockpost_sleeper5",
			idle = 0,
			prior = 0, state = {0,1,2}, squad = squad, group = groups[4],
			in_rest = "", out_rest = "escape_blockpost_zone"
		}
		table.insert(sj, t)
		t = { section = "logic@esc_blockpost_sleeper6",
			idle = 0,
			prior = 0, state = {0,1,2}, squad = squad, group = groups[4],
			in_rest = "", out_rest = "escape_blockpost_zone"
		}
		table.insert(sj, t)
		--' alarm
		t = { section = "logic@esc_blockpost_alarm_walker1",
			idle = 0,
			prior = 9, state = {2}, squad = squad, group = groups[4],
			in_rest = "", out_rest = "escape_blockpost_zone"
		}
		table.insert(sj, t)
		t = { section = "logic@esc_blockpost_alarm_walker2",
			idle = 0,
			prior = 9, state = {2}, squad = squad, group = groups[4],
			in_rest = "", out_rest = "escape_blockpost_zone"
		}
		table.insert(sj, t)
		t = { section = "logic@esc_blockpost_alarm_walker3",
			idle = 0,
			prior = 9, state = {2}, squad = squad, group = groups[4],
			in_rest = "", out_rest = "escape_blockpost_zone"
		}
		table.insert(sj, t)
		t = { section = "logic@esc_blockpost_alarm_walker4",
			idle = 0,
			prior = 9, state = {2}, squad = squad, group = groups[4],
			in_rest = "", out_rest = "escape_blockpost_zone"
		}
		table.insert(sj, t)
		t = { section = "logic@esc_blockpost_alarm_walker5",
			idle = 0,
			prior = 8, state = {2}, squad = squad, group = groups[3],
			in_rest = "", out_rest = "escape_blockpost_zone"
		}
		table.insert(sj, t)
		t = { section = "logic@esc_blockpost_alarm_walker6",
			idle = 0,
			prior = 8, state = {2}, squad = squad, group = groups[3],
			in_rest = "", out_rest = "escape_blockpost_zone"
		}
		table.insert(sj, t)
		--' командир
		t = { section = "logic@esc_blockpost_commander_day",
			idle = 0,
			prior = 100, state = {0,2}, squad = squad, group = groups[1],
			in_rest = "", out_rest = "escape_blockpost_zone",
			predicate = function(obj) 
			            	return obj:profile_name() == "soldier_commander"
			            end
		}
		table.insert(sj, t)
		t = { section = "logic@esc_blockpost_commander_night",
			idle = 0,
			prior = 100, state = {1}, squad = squad, group = groups[1],
			in_rest = "", out_rest = "escape_blockpost_zone",
			predicate = function(obj)
			            	return obj:profile_name() == "soldier_commander"
			            end
		}
		table.insert(sj, t)
	end

	--' Лагерь новичков на Escape
	if type == "esc_lager" then
		-- охранники
		t = { section = "logic@esc_lager_zoneguard1",
			idle = 0,
			prior = 9, state = {0, 1},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = "",
		}
		table.insert(sj, t)
		t = { section = "logic@esc_lager_zoneguard2",
			idle = 0,
			prior = 9, state = {0, 1},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = "",
		}
		table.insert(sj, t)
		t = { section = "logic@esc_lager_walker3",
			idle = 0,
			prior = 8, state = {0, 1},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
		t = { section = "logic@esc_lager_walker4",
			idle = 0,
			prior = 8, state = {0, 1},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
		-- у костра днём
		t = { section = "logic@esc_lager_kamp1",
			idle = 0,
			prior = 6, state = {0},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
		t = { section = "logic@esc_lager_kamp1",
			idle = 0,
			prior = 6, state = {0},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
		t = { section = "logic@esc_lager_kamp1",
			idle = 0,
			prior = 6, state = {0},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
		-- спящие ночью
		t = { section = "logic@esc_lager_sleeper1",
			idle = 0,
			prior = 3, state = {1},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
		t = { section = "logic@esc_lager_sleeper2",
			idle = 0,
			prior = 3, state = {1},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
		t = { section = "logic@esc_lager_sleeper3",
			idle = 0,
			prior = 3, state = {1},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
		-- спящие ночью и днёи
		t = { section = "logic@esc_lager_sleeper4",
			idle = 0,
			prior = 0, state = {0,1},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
		t = { section = "logic@esc_lager_sleeper5",
			idle = 0,
			prior = 0, state = {0,1},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
		t = { section = "logic@esc_lager_sleeper6",
			idle = 0,
			prior = 0, state = {0,1},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
		t = { section = "logic@esc_lager_sleeper7",
			idle = 0,
			prior = 0, state = {0,1},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
	end

	--' Бандиты на фабрике
	if type == "esc_fabrika_bandit" then
		-- снайпер, охраняющий лестницу на чердак
--		t = { section = "camper@esc_fabrika_bandit",
--			idle = 0,
--			prior = 3, state = {0, 1},
--			in_rest = "", out_rest = ""
--		}
--		table.insert(sj, t)
		-- часовые днём
		t = { section = "logic@esc_fabrika_bandit_day_walker1",
			idle = 0,
			prior = 2, state = {0},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
		t = { section = "logic@esc_fabrika_bandit_day_walker2",
			idle = 0,
			prior = 2, state = {0},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
		t = { section = "logic@esc_fabrika_bandit_day_walker3",
			idle = 0,
			prior = 2, state = {0},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
		t = { section = "logic@esc_fabrika_bandit_day_walker4",
			idle = 0,
			prior = 2, state = {0},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
		t = { section = "logic@esc_fabrika_bandit_day_walker5",
			idle = 0,
			prior = 2, state = {0},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
		t = { section = "logic@esc_fabrika_bandit_day_walker6",
			idle = 0,
			prior = 2, state = {0},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
		-- сидящие у костра всегда
		t = { section = "logic@esc_fabrika_bandit_kamp",
			idle = 0,
			prior = 1, state = {0, 1},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
		t = { section = "logic@esc_fabrika_bandit_kamp",
			idle = 0,
			prior = 1, state = {0, 1},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
		-- сидящие у костра ночью
		t = { section = "logic@esc_fabrika_bandit_kamp",
			idle = 0,
			prior = 0, state = {1},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
		t = { section = "logic@esc_fabrika_bandit_kamp",
			idle = 0,
			prior = 0, state = {1},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
		t = { section = "logic@esc_fabrika_bandit_kamp",
			idle = 0,
			prior = 0, state = {1},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
	end

--'--------------------------------------------------------------------------	
--' GARBAGE
--'--------------------------------------------------------------------------	
	--' Garbage bandits
	if type == "gar_bandits" then
		t = { section = "logic@gar_bandits_walker1",
			idle = 0,
			prior = 3, state = {0,1},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)		
		t = { section = "logic@gar_bandits_walker2",
			idle = 0,
			prior = 3, state = {0,1},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)		
		t = { section = "logic@gar_bandits_walker3",
			idle = 0,
			prior = 3, state = {0,1},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)		
		t = { section = "logic@gar_bandits_walker4",
			idle = 0,
			prior = 1, state = {0,1},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)		
		t = { section = "logic@gar_bandits_kamp1",
			idle = 0,
			prior = 1, state = {0,1},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)		
		t = { section = "logic@gar_bandits_kamp1",
			idle = 0,
			prior = 1, state = {0,1},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)		
		t = { section = "logic@gar_bandits_kamp1",
			idle = 0,
			prior = 1, state = {0,1},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)		
		t = { section = "logic@gar_bandits_kamp1",
			idle = 0,
			prior = 1, state = {0,1},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)		
		t = { section = "logic@gar_bandits_attack_walker1",
			idle = 0,
			prior = 5, state = {1},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)		
		t = { section = "logic@gar_bandits_attack_walker2",
			idle = 0,
			prior = 5, state = {1},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)		
		t = { section = "logic@gar_bandits_attack_walker3",
			idle = 0,
			prior = 5, state = {1},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)		
		t = { section = "logic@gar_bandits_attack_walker4",
			idle = 0,
			prior = 5, state = {1},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)		
		t = { section = "logic@gar_bandits_attack_walker5",
			idle = 0,
			prior = 5, state = {1},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)		
	end
	--' Garbage stalkers
	if type == "gar_stalkers" then
		t = { section = "logic@gar_stalkers_walker1",
			idle = 0,
			prior = 3, state = {0,1},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)		
		t = { section = "logic@gar_stalkers_walker2",
			idle = 0,
			prior = 3, state = {0,1},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)		
		t = { section = "logic@gar_stalkers_walker3",
			idle = 0,
			prior = 3, state = {0,1},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)		
		t = { section = "logic@gar_stalkers_kamp1",
			idle = 0,
			prior = 1, state = {0,1},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
		t = { section = "logic@gar_stalkers_kamp1",
			idle = 0,
			prior = 1, state = {0,1},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)				
		t = { section = "logic@gar_stalkers_kamp1",
			idle = 0,
			prior = 1, state = {0,1},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)				
		t = { section = "logic@gar_stalkers_kamp1",
			idle = 0,
			prior = 1, state = {0,1},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)				
		t = { section = "logic@gar_stalkers_kamp1",
			idle = 0,
			prior = 1, state = {0,1},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)		
		t = { section = "logic@gar_stalkers_attack_walker1",
			idle = 0,
			prior = 5, state = {1},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)		
		t = { section = "logic@gar_stalkers_attack_walker2",
			idle = 0,
			prior = 5, state = {1},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)		
		t = { section = "logic@gar_stalkers_attack_walker3",
			idle = 0,
			prior = 5, state = {1},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)		
		t = { section = "logic@gar_stalkers_attack_walker4",
			idle = 0,
			prior = 5, state = {1},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)		
		t = { section = "logic@gar_stalkers_attack_walker5",
			idle = 0,
			prior = 5, state = {1},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)		
	end
	--' Garbage maniac
	if type == "gar_maniac" then
		t = { section = "logic@gar_maniac_camper",
			idle = 0,
			prior = 5, state = {0},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)		
		t = { section = "logic@gar_maniac_sleeper",
			idle = 0,
			prior = 5, state = {1},
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)		
	end
	--' Garbage DOLG blockpost
	if type == "gar_dolg" then
		t = { section = "logic@gar_dolg_kamp1",
			idle = 0,
			prior = 0, state = {0},
			in_rest = "", out_rest = "gar_golg_restrictor",
		}
		table.insert(sj, t)
		t = { section = "logic@gar_dolg_kamp1",
			idle = 0,
			prior = 0, state = {0},
			in_rest = "", out_rest = "gar_golg_restrictor",
		}
		table.insert(sj, t)				
		t = { section = "logic@gar_dolg_kamp1",
			idle = 0,
			prior = 0, state = {0},
			in_rest = "", out_rest = "gar_golg_restrictor",
		}
		t = { section = "logic@gar_dolg_kamp2",
			idle = 15*60*1000,
			prior = 2, state = {0},
			in_rest = "", out_rest = "gar_golg_restrictor",
		}
		table.insert(sj, t)				
		t = { section = "logic@gar_dolg_kamp3",
			idle = 15*60*1000,
			prior = 3, state = {0},
			in_rest = "", out_rest = "gar_golg_restrictor",
		}
		table.insert(sj, t)				
		t = { section = "logic@gar_dolg_kamp1",
			idle = 0,
			prior = 0, state = {0},
			in_rest = "", out_rest = "gar_golg_restrictor",
		}
		table.insert(sj, t)				
		t = { section = "logic@gar_dolg_kamp1",
			idle = 0,
			prior = 0, state = {0},
			in_rest = "", out_rest = "gar_golg_restrictor",
		}
		table.insert(sj, t)		
		t = { section = "logic@gar_dolg_patrol1",
			idle = 2 * 1000 * 60 * 60,
			prior = 8, state = {0},
			in_rest = "", out_rest = "",
		}
		table.insert(sj, t)		
		t = { section = "logic@gar_dolg_follower1",
			idle = 2 * 1000 * 60 * 60,
			prior = 4, state = {0},
			in_rest = "", out_rest = "",
			leader = "logic@gar_dolg_patrol1",
		}
		table.insert(sj, t)		
		t = { section = "logic@gar_dolg_follower1",
			idle = 2 * 1000 * 60 * 60,
			prior = 4, state = {0},
			in_rest = "", out_rest = "",
			leader = "logic@gar_dolg_patrol1",
		}
		table.insert(sj, t)		
		t = { section = "logic@gar_dolg_zoneguard1",
			idle = 0,
			prior = 10, state = {0, 1},
			in_rest = "", out_rest = "gar_golg_restrictor",
		}
		table.insert(sj, t)		
		t = { section = "logic@gar_dolg_zoneguard2",
			idle = 0,
			prior = 10, state = {0, 1},
			in_rest = "", out_rest = "gar_golg_restrictor",
		}
		table.insert(sj, t)		
		t = { section = "logic@gar_dolg_zoneguard3",
			idle = 0,
			prior = 10, state = {0, 1},
			in_rest = "", out_rest = "gar_golg_restrictor",
		}
		table.insert(sj, t)			
		t = { section = "logic@gar_dolg_camper1",
			idle = 0,
			prior = 10, state = {1},
			in_rest = "", out_rest = "gar_golg_restrictor",
		}
		table.insert(sj, t)			
		t = { section = "logic@gar_dolg_camper2",
			idle = 0,
			prior = 10, state = {1},
			in_rest = "", out_rest = "gar_golg_restrictor",
		}
		table.insert(sj, t)			
		t = { section = "logic@gar_dolg_camper3",
			idle = 0,
			prior = 10, state = {1},
			in_rest = "", out_rest = "gar_golg_restrictor",
		}
		table.insert(sj, t)			
		t = { section = "logic@gar_dolg_camper4",
			idle = 0,
			prior = 10, state = {1},
			in_rest = "", out_rest = "gar_golg_restrictor",
		}
		table.insert(sj, t)			
		t = { section = "logic@gar_dolg_camper5",
			idle = 0,
			prior = 10, state = {1},
			in_rest = "", out_rest = "gar_golg_restrictor",
		}
		table.insert(sj, t)			
    end	    


--'--------------------------------------------------------------------------	
--' AGROPROM
--'--------------------------------------------------------------------------	
	--' Agroprom NII
	if type == "agr_nii" then
		t = { section = "logic@agr_nii_walker1",
			idle = 0,
			prior = 9, state = {0},
			in_rest = "agroprom_underground_space_restrictor", out_rest = ""
		}
		table.insert(sj, t)		
		t = { section = "logic@agr_nii_walker2",
			idle = 0,
			prior = 9, state = {0},
			in_rest = "agroprom_underground_space_restrictor", out_rest = ""
		}
		table.insert(sj, t)		
		t = { section = "logic@agr_nii_walker3",
			idle = 0,
			prior = 9, state = {1},
			in_rest = "agroprom_underground_space_restrictor", out_rest = ""
		}
		table.insert(sj, t)		
		t = { section = "logic@agr_nii_walker4",
			idle = 0,
			prior = 9, state = {1},
			in_rest = "agroprom_underground_space_restrictor", out_rest = ""
		}
		table.insert(sj, t)		
		t = { section = "logic@agr_nii_camper1",
			idle = 0,
			prior = 8, state = {0,1},
			in_rest = "agroprom_underground_space_restrictor", out_rest = ""
		}
		table.insert(sj, t)		
		t = { section = "logic@agr_nii_walker5",
			idle = 0,
			prior = 7, state = {0,1},
			in_rest = "agroprom_underground_space_restrictor", out_rest = ""
		}
		table.insert(sj, t)		
		t = { section = "logic@agr_nii_camper2",
			idle = 0,
			prior = 6, state = {0,1},
			in_rest = "agroprom_underground_space_restrictor", out_rest = ""
		}
		table.insert(sj, t)		
		t = { section = "logic@agr_nii_walker6",
			idle = 0,
			prior = 5, state = {0,1},
			in_rest = "agroprom_underground_space_restrictor", out_rest = ""
		}
		table.insert(sj, t)		
		t = { section = "logic@agr_nii_walker7",
			idle = 0,
			prior = 5, state = {0,1},
			in_rest = "agroprom_underground_space_restrictor", out_rest = ""
		}
		table.insert(sj, t)
		t = { section = "logic@agr_nii_patrol1",
			idle = 4 * 1000 * 60 * 60,
			prior = 4, state = {0},
			in_rest = "agroprom_underground_space_restrictor", out_rest = ""
		}
		table.insert(sj, t)		
		t = { section = "logic@agr_nii_follower1",
			idle = 4 * 1000 * 60 * 60,
			prior = 3, state = {0},
			in_rest = "agroprom_underground_space_restrictor", out_rest = "",
			leader = "logic@agr_nii_patrol1"
		}
		table.insert(sj, t)		
		t = { section = "logic@agr_nii_follower2",
			idle = 4 * 1000 * 60 * 60,
			prior = 3, state = {0},
			in_rest = "agroprom_underground_space_restrictor", out_rest = "",
			leader = "logic@agr_nii_patrol1"
		}
		table.insert(sj, t)		
		t = { section = "logic@agr_nii_sleeper1",
			idle = 0,
			prior = 0, state = {0,1},
			in_rest = "agroprom_underground_space_restrictor", out_rest = ""
		}
		table.insert(sj, t)
		t = { section = "logic@agr_nii_sleeper2",
			idle = 0,
			prior = 0, state = {0,1},
			in_rest = "agroprom_underground_space_restrictor", out_rest = ""
		}
		table.insert(sj, t)
		t = { section = "logic@agr_nii_sleeper3",
			idle = 0,
			prior = 0, state = {0,1},
			in_rest = "agroprom_underground_space_restrictor", out_rest = ""
		}
		table.insert(sj, t)
	end

	--' Agroprom factory
	if type == "agr_factory" then
		t = { section = "logic@agr_factory_walker1",
			idle = 0,
			prior = 0, state = {0},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = "agr_factory_restrictor"
		}
		table.insert(sj, t)		
		t = { section = "logic@agr_factory_walker2",
			idle = 0,
			prior = 0, state = {0},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = "agr_factory_restrictor"
		}
		table.insert(sj, t)		
		t = { section = "logic@agr_factory_walker3",
			idle = 0,
			prior = 0, state = {0},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = "agr_factory_restrictor"
		}
		table.insert(sj, t)		
		t = { section = "logic@agr_factory_walker4",
			idle = 0,
			prior = 0, state = {0},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = "agr_factory_restrictor"
		}
		table.insert(sj, t)		
		t = { section = "logic@agr_factory_walker5",
			idle = 0,
			prior = 0, state = {0},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = "agr_factory_restrictor"
		}
		table.insert(sj, t)		
		t = { section = "logic@agr_factory_walker6",
			idle = 0,
			prior = 0, state = {0},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = "agr_factory_restrictor"
		}
		table.insert(sj, t)
	end

	--' Radar antena
	if type == "rad_antena" then
		-- охрана ворот
		t = { section = "logic@rad_antena_gate_walker1",
			idle = 0,
			prior = 5, state = {0},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
		t = { section = "logic@rad_antena_gate_walker2",
			idle = 0,
			prior = 5, state = {0},
			squad = squad, group = groups[1],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
		-- шатающиеся по территории
		t = { section = "logic@rad_antena_walker1",
			idle = 0,
			prior = 0, state = {0},
			squad = squad, group = groups[2],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
		t = { section = "logic@rad_antena_walker2",
			idle = 0,
			prior = 0, state = {0},
			squad = squad, group = groups[2],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
		t = { section = "logic@rad_antena_walker3",
			idle = 0,
			prior = 0, state = {0},
			squad = squad, group = groups[2],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
		t = { section = "logic@rad_antena_walker4",
			idle = 0,
			prior = 0, state = {0},
			squad = squad, group = groups[2],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
		t = { section = "logic@rad_antena_walker5",
			idle = 0,
			prior = 0, state = {0},
			squad = squad, group = groups[2],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
		-- мост
		t = { section = "logic@rad_antena_bridge_walker1",
			idle = 0,
			prior = 1, state = {0},
			squad = squad, group = groups[2],
			in_rest = "", out_rest = ""
		}
		table.insert(sj, t)
	end
	
	gulag_dark_valley.load_job(sj, gname, type, squad, groups)
	gulag_bar.load_job(sj, gname, type, squad, groups)
	gulag_military.load_job(sj, gname, type, squad, groups)	
end

function loadStates(gname, type)
	if type == "test" or type == "test1" then
		return function(gulag)
			return 0
		end
	end

	if type == "rest" or type == "search" or type == "walkers" or type == "campers" then
		return function(gulag)
			return 0
		end
	end

	if type == "gar_maniac" then
		return function(gulag)
			if level.get_time_hours() >= 7 and level.get_time_hours() <= 22 then
				return 0  -- день
			else
				return 1  -- ночь
			end
		end
	end

	if type == "agr_nii" then
		return function(gulag)
			if level.get_time_hours() >= 7 and level.get_time_hours() <= 22 then
				return 0  -- день
			else
				return 1  -- ночь
			end
		end
	end


	if type == "blockpost" then
		return function(gulag)
			if gulag:getCasualities() >= 3 then
				printf("Start Raid")
				gulag:changeCasualities(gulag:getCasualities())
				escape_raid.start_raid()
			end
		
			for k,v in gulag.Object do
				enemy = v:best_enemy()
				if enemy ~= nil then
--					level.check_object(enemy)
--					printf("%s",enemy:name())
					enemy_type = get_clsid(enemy)
					if enemy_type == clsid.actor or
	  	   			   enemy_type == clsid.soldier or
		   			   enemy_type == clsid.script_stalker or
	   				   enemy_type == clsid.trader
	   				then
	   					gulag.alarm_start = game.get_game_time()
	   					return 2 -- тревога
	   				end
				end
			end		
		
			if gulag.alarm_start == nil or
				game.get_game_time():diffSec(gulag.alarm_start) > 300 then
				if level.get_time_hours() >= 6 and level.get_time_hours() <= 22 then
					return 0  -- день
				else
					return 1  -- ночь
				end
			else
				return 2
			end
		end
	end

	if type == "gar_stalkers" or type == "gar_bandits" then
		return function(gulag)
			if gulag.state == 1 then return 1 end
			
			local actor = db.actor
--			local zone = level.object("gar_shooting")
--			if actor ~= nil and zone ~= nil then
--				if actor:position():distance_to(zone:position()) < 50 then
--					return 1
--				else
--					return 0
--				end
--			else
				return 0
--			end
		end
	end
	
	if type == "gar_dolg" then
		return function(gulag)
			--if gulag.state == 1 then return 1 end
			local actor = db.actor
			if actor and actor:has_info ("gar_monsters_rush_wave1") then
			   printf ("GARBAGE DOLG GULAG STATE 1") 
               return 1
			else
			   printf ("GARBAGE DOLG GULAG STATE 0") 
			   return 0
			end
		end
	end

	if type == "esc_lager" or type == "esc_fabrika_bandit" then
		return function(gulag)
			if level.get_time_hours() >= 8 and level.get_time_hours() <= 21 then
				return 0  -- день
			else
				return 1  -- ночь
			end
		end
	end

	if type == "agr_factory" then
		return function( gulag )
			if gulag:getCasualities() >= 3 then
				local actor = db.actor
				if actor and actor:dont_has_info( "agr_factory_need_help" ) then
					actor:give_info_portion( "agr_factory_need_help" )
				end
			end
			return 0
		end
	end

	local f

	f = gulag_dark_valley.load_states(gname, type)
	if f then
		return f
	end

	f = gulag_bar.load_states(gname, type)
	if f then
		return f
	end

	f = gulag_military.load_states(gname, type)
	if f then
		return f
	end

	utils.abort("ERROR: unrecognized gulag's type '%s'", type)
end

function get_megafone(type, name)
--	if type == "blockpost" then
--		st = gramofon.m_gramofon(name.."_rupor", "blockpost_commander")
--		st:event(0)
--		return st
--	end
	return nil
end
