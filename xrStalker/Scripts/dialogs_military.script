-------------------------------------------------------------------------
--	created:	2005/02/12
--	created:	12:2:2005   12:59
--	filename: 	x:\gamedata\scripts\dialogs_military.script
--	file path:	x:\gamedata\scripts
--	file base:	dialogs_military
--	file ext:	script
--	author:		Tunduk Vladimir aka Sidorovich
--	
--	purpose:	dialog support for military
-------------------------------------------------------------------------

-- Оплата долговцем наших услуг по устранению снайпера
function mil_dolg_payment (stalker, player)
    stalker:transfer_money (stalker:money () / 2, player)
end

-- Отмечаем провал задачи
function mil_dolg_sniper_failed (stalker, player)
    db.actor:set_task_state (task.fail, "mil_kill_sniper", 0)
    db.actor:set_task_state (task.fail, "mil_kill_sniper", 1)
    db.actor:set_task_state (task.fail, "mil_kill_sniper", 2)
end

-- отмечаем выполнение задачи
function mil_dolg_sniper_complete (stalker, player)
    db.actor:set_task_state (task.completed, "mil_kill_sniper", 0)
    db.actor:set_task_state (task.completed, "mil_kill_sniper", 2)
end

function transfer_flash (player, stalker)
    player:transfer_item (player:object("crazy_flash"), stalker)
    if db.actor:has_info ("mil_max_job") then
       db.actor:set_task_state (task.completed, "mil_mad_job", 0)
       db.actor:set_task_state (task.completed, "mil_mad_job", 2)
    end        
end

function is_player_help (player, stalker)
    if db.storage[db.actor:id ()] == nil then return false end
    return db.storage[db.actor:id ()].mil_dolg["killed_by_actor"]
end

function no_player_help (stalker, player)
    return not this.is_player_help (player, stalker)
end

function transfer_rg6 (stalker, player)
    return
end

function set_freedom_enemy (player, stalker)
    db.actor:set_character_community ("dolg")
end

function set_task1_complete (player, stalker)
    if db.actor:has_info ("mil_leader_quest1_start") then
       db.actor:set_task_state (task.completed, "mil_lukash_job", 1)
    end   
end

function set_task3_complete (player, stalker)
    if db.actor:has_info ("mil_leader_quest1_start") then
       db.actor:set_task_state (task.completed, "mil_lukash_job", 0)
       db.actor:set_task_state (task.completed, "mil_lukash_job", 3)
    end   
end

function set_courier_task_complete (player, stalker)
    if db.actor:has_info ("mil_leader_quest2_start") then
       db.actor:set_task_state (task.completed, "mil_courier_job", 0)
       db.actor:set_task_state (task.completed, "mil_courier_job", 2)
       player:transfer_item (player:object("mil_courier_doc"), stalker)
       level_tasks.remove_location (707, "mil_lukash_location")
    end   
end    

function actor_has_weapon (stalker, player)
    printf ("STALKER NAME IS : %s", stalker:name ())
    return xr_conditions.actor_has_weapon (player, stalker)
end

function actor_dont_has_weapon (stalker, player)
    printf ("STALKER NAME IS : %s", stalker:name ())
    return not xr_conditions.actor_has_weapon (player, stalker)
end