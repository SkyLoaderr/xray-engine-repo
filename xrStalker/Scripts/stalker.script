function init    (obj)
	xr_motivator.AddToMotivator(obj)
end


----------------------------------------------------------------------------------------------------------------------
class "actor_binder" (object_binder)
----------------------------------------------------------------------------------------------------------------------
function actor_binder:__init (obj) super(obj)
end
----------------------------------------------------------------------------------------------------------------------
function actor_binder:net_spawn(data)
	if object_binder.net_spawn(self,data) == false then
		return false
	else
		if self.object:dont_has_info("storyline_actor_start") then
			self.object:give_info_portion("encyclopedy")
			self.object:give_info_portion("storyline_actor_start")
			self.object:give_info_portion("level_changer_icons")		
		end
		return true
	end
end
----------------------------------------------------------------------------------------------------------------------
function actor_binder:update(delta)
	object_binder.update(self, delta)
			actor = self.object
			
       		if actor:has_info("escape_trader_need_artefact") and
       		   actor:object("af_night_star") ~= nil
       		then
       			actor:give_info_portion("escape_trader_find_artefact")
				actor:set_task_state(task.completed, "escape_trader_need_artefact", 1)
       		end       	

       		if actor:has_info("escape_need_blockpost_case") and
       		   actor:object("quest_case_01") ~= nil
       		then
       			actor:give_info_portion("escape_take_blockpost_case")
				actor:set_task_state(task.completed, "escape_blockpost_case", 1)
       		end       	

       		if actor:has_info("escape_need_agroprom_documents") and
       		   actor:object("quest_case_02") ~= nil
       		then
       			actor:give_info_portion("agroprom_take_agroprom_documents")
				actor:set_task_state(task.completed, "agroprom_get_military_documents", 1)
       		end       	

       		if actor:has_info("garbage_find_stalker") then
       			printf("[SsL] has info")
       		end
       		if actor:object("garbage_letter") ~= nil then
       			printf("[SsL] has letter")
       		end
       		
			if actor:has_info("garbage_find_stalker") and
       			actor:object("garbage_letter") ~= nil
       		then
       			printf("[SsL] find_garbage_letter")
       			actor:give_info_portion("garbage_find_dead_stalker")
				actor:set_task_state(task.fail, "garbage_meet_stalker", 0)
				actor:give_info_portion("agroprom_meet_gunslinger_band")
       		end       	

       		if actor:has_info("agroprom_meet_gunslinger_band") and
       		   actor:object("agroprom_notebook") ~= nil
       		then
       			actor:give_info_portion("agroprom_find_gunslinger_band")
				actor:set_task_state(task.fail, "agroprom_meet_gunslinger_band", 0)
       		end       	

	
end
----------------------------------------------------------------------------------------------------------------------
function actor_init    (npc)
	npc:bind_object(actor_binder(npc))
end

function object_init    (obj)
	local obj_ini = obj:spawn_ini()
	if obj_ini == nil then return end
	
	if obj_ini:section_exist("tip") == true then
		if obj_ini:line_exist("tip", "label") == true then
			local ll = obj_ini:r_string("tip", "label")
			local st = string_table()
			text = st:get_by_id(ll)
			obj:set_tip_text(text)
		end
	end
	
	if obj_ini:section_exist("info") == true then
		if obj_ini:line_exist("info", "id") == true then
			obj:set_use_callback(object_info_callback)
		end
	end	
end

function object_info_callback(obj)
	local obj_ini = obj:spawn_ini()	
	local actor = level.actor()
	if obj_ini == nil or actor == nil then return end
	if obj_ini:section_exist("info") == true then
		if obj_ini:line_exist("info", "id") == true then
			local label = obj_ini:r_string("info", "id")
			actor:give_info_portion(label)			
		end
	end
end

function script_zone_init(obj)
	obj:bind_object(xr_zones.zone_binder(obj))
end
