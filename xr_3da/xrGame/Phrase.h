///////////////////////////////////////////////////////////////
// Phrase.h
// класс, описывающий фразу (элемент диалога)
///////////////////////////////////////////////////////////////

#pragma once

#include "ui/xrXMLParser.h"

#include "PhraseScript.h"

class CPhraseDialog;
class CGameObject;

class CPhrase
{
private:
	friend CPhraseDialog;
public:
	CPhrase(void);
	virtual ~CPhrase(void);

	void			SetText			(LPCSTR text)		{m_text = text;}
	LPCSTR			GetText			()	const;
	LPCSTR			GetScriptText	(const CGameObject* pSpeaker1, const CGameObject* pSpeaker2) const;

	void			SetIndex	(int index)			{m_iIndex = index;}
	int				GetIndex	()	const			{return m_iIndex;}

	int				GoodwillLevel()	const			{return m_iGoodwillLevel;}

	bool			IsDummy()		const;

	shared_str		Sound()			const			{return m_sound;}
	shared_str		Anim()			const			{return m_anim;}

protected:
	//уникальный индекс в списке фраз диалога
	int	m_iIndex;
	//текстовое представление фразы
	std::string m_text;
	
	//минимальный уровень благосклоггости, необходимый для того
	//чтоб фразу можно было сказать
	int m_iGoodwillLevel;
	
	//для вызова скриптовых функций
	CPhraseScript m_PhraseScript;

	//для диалогов между NPC
	//звуковой файл
	shared_str m_sound;
	shared_str m_anim;
};